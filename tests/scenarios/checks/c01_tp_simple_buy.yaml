# c01_tp_simple_buy - TP Simple BUY
# Referencia: docs/expted_behavior_specification_fixed.md Escenario 1

scenario: c01_tp_simple_buy
description: "BUY se activa y toca TP, SELL se cancela, nuevas mains creadas"
priority: CRITICAL

checks:
  # BUY alcanza TP
  - name: "MAIN_BUY status TP_HIT"
    type: operation_status
    filter:
      is_main: true
      op_type: main_buy
    expect:
      status: tp_hit
      count: ">= 1"

  # SELL cancelada
  - name: "MAIN_SELL status CANCELLED"
    type: operation_status
    filter:
      is_main: true
      op_type: main_sell
    expect:
      status: cancelled
      count: ">= 1"

  # Balance aumentó
  - name: "Balance increased"
    type: balance
    expect:
      final: "> initial"

  # Nuevo ciclo creado (renovación = nuevo C2)
  - name: "New cycle created after TP"
    type: cycle_count
    filter:
      cycle_type: main
    expect:
      count: ">= 2"

  # Invariante
  - name: "2 mains per cycle"
    type: invariant
    rule: mains_per_cycle
    expect:
      count: 2
